# 1 嵌入式系统基础

## 1.1 嵌入式系统基础

### 1.1.1 嵌入式系统概念

#### 嵌入式系统的特点

1. 专用
2. 精简
3. 多样
4. 独特
5. 捆绑：应用软件与操作系统一体化
6. OS：嵌入式操作系统

### 1.1.2 嵌入式系统与台式计算机

#### 硬件平台比较

| 名称     | 嵌入式系统        | 台式计算机            |
| -------- | ----------------- | --------------------- |
| CPU      | ARM等嵌入式处理器 | Intel，AMD的X86处理器 |
| 内存     | SDRAM芯片         | 内存条                |
| 存储设备 | Flash芯片         | 硬盘或固态盘          |
| 输入设备 | 按键，触摸屏      | 鼠标，键盘            |
| 输出设备 | 通常为LCD         | 显示器                |
| 声音设备 | 音频芯片          | 声卡                  |
| 接口     | MAX3232等芯片     | 主板集成              |
| 其他设备 | MAX3232等芯片     | 主板集成或外接卡      |
|          | 芯片级            | 集成级别              |

#### 软件平台比较

| 名称     | 嵌入式系统                                                   | 台式计算机                                       |
| -------- | ------------------------------------------------------------ | ------------------------------------------------ |
| 引导代码 | Bootloader引导，针对电路移植                                 | 主办的BIOS引导，无需改动                         |
| 操作系统 | Linux, WinCE, VxWorks等，需要移植                            | 一般为Windows，不需要移植                        |
| 驱动程序 | 每个设备驱动程序都必须针对电路板进行重新开发或移植，一般不能直接下载使用 | 操作系统含有大多数驱动程序，或从网上下载直接使用 |
| 协议栈   | 需要移植                                                     | 操作系统或第三方提供                             |
| 开发环境 | 借助主机进行交叉编译                                         | 在本机就可开发调试                               |
| 仿真器   | 通常需要                                                     | 不需要                                           |

### 1.1.3 嵌入式系统与单片机

#### 传统的单片机代表

1. `51系列`
2. `PIC系列`
3. `AVR系列`

#### 二者的比较

##### 硬件角度

| 名称              | 嵌入式系统                 | 单片机               |
| ----------------- | -------------------------- | -------------------- |
| 硬件平台          | 厂家提供通用的硬件平台     | 自己设计制作硬件平台 |
| 硬件设计          | 以硬件平台为基础裁剪和扩展 | 重新设计             |
| CPU               | 一般为32位                 | 多为8位或16位        |
| MMU(存储管理单元) | 支持                       | 不支持               |
| 功能              | 能够实现复杂功能           | 难于实现复杂功能     |
| 开发人员          | 主要为计算机专业人员       | 硬件设计人员         |
| 仿真器            | 通常初始化使用，以后不使用 | 全程使用             |
| 仿真头            | 不需要                     | 需要(传统单片机)     |

##### 软件角度

| 名称     | 嵌入式系统                                              | 单片机                 |
| -------- | ------------------------------------------------------- | ---------------------- |
| 开发平台 | 主机上相匹配的操作系统                                  | 主机上的仿真软件       |
| 功能     | 相对复杂                                                | 通常比较简单           |
| 运行环境 | 嵌入式操作系统                                          | 直接运行在硬件上       |
| 编程语言 | C、Java及框架                                           | C、汇编                |
| 协议支持 | 嵌入式操作系统提供，如USB协议和网络协议，**移植后**使用 | 自己实现               |
| 驱动程序 | 操作系统提供大部分驱动                                  | 自己实现               |
| 调试     | 交叉编译，操作系统环境调试                              | 专门的仿真软件在线调试 |

## 1.2 嵌入式处理器

### 1.2.1 从传统处理器到片上系统

#### 集中传统处理器

三种传统的处理器之间的界限正变得模糊，技术大融合是大趋势

1. 微控制单元(MCU)：集成CPU、RAM、ROM、定时器和多种I/O接口

    如51、PIC和AVR系列单片机

2. 数字信号处理器(DSP)：专注于信号处理，如音视频编解码

    一般频率较高，代表厂商为`TI`

3. 微处理器(MPU)：专注于运算性能和速度，没有集成外设

    Intel的X86处理器是MPU的代表

#### 基于IP核的片上系统（SoC）

随着技术进步……

通常包含：

1. 处理器核心
    1. ARM RISC
    2. MIPS RISC
    3. DSP核心
2. 各种通信模块
    1. TCP/IP通信单元
    2. GPRS通信单元
    3. GSM通信单元
3. 其他模块
    1. USB单元
    2. IEEE1394
    3. 蓝牙模块

#### IP Core（Intellectual Property Core，知识产权核）

……

1. 软核：以硬件描述语言编写的程序形式提供给用户
2. 硬核：以硬件原理图与板图的形式提供给用户

#### SoC（System on Chip）

……

### 1.2.2 嵌入式处理器之ARM

#### ARM的含义

1. 一个公司的名字
2. 一类微处理器的名字
3. 一种技术的名字

### 1.2.3 嵌入式处理器与X86

| 比较点      | X86            | 嵌入式处理器   |
| ----------- | -------------- | -------------- |
| 应用        |                |                |
| 组成        |                |                |
| 指令系统    |                |                |
| I/O编址方式 | 独立编址(计组) | 统一编址(计组) |
| 系统存储    |                |                |
| 软件        |                |                |
| 产品使用    |                |                |
| 关联        |                |                |

### 1.2.4 其他嵌入式处理器

#### `MIPS`

##### `MIPS与MIPS公司`
1. 既开发又生产

##### `MIPS与ARM`

#### `PowerPC`

## 1.3 嵌入式操作系统

### 1.3.1 实时操作系统

1. 实时性
2. 实时系统
    1. 硬实时系统：通常由**能否支持硬实时系统**区分实时操作系统与非实时操作系统
    2. 软实时系统

### 1.3.2 与应用程序一体化的嵌入式操作系统

**完整的有交互能力的嵌入式操作系统**的两个不可或缺的特性

1. 要单独安装独立运行
2. 提供了用户接口

**与应用程序一体化的嵌入式操作系统**的特点

例如：uC/OS和QNX（本门课程不对该类操作系统讨论）

1. 不需要单独安装独立运行
2. 不存在提供交互能力的用户界面
3. 操作系统和应用程序一起形成最终可执行程序，两位一体
4. 和单片机系统一样通过仿真器及配套软件进行开发调试
5. 占位
6. ……

### 1.3.3 嵌入式操作系统之Linux

#### Linux的相关的一些内容

1. Linux不是实时操作系统

#### 变种

1. RT-Linux
2. μClinux

#### 主要特性

1. 完全免费，可以任意修改源码，兼容`POSIX1.0（Portable Operating System Interface，可移植操作系统接口）`标准，可以方便地获得第三方软硬件厂商的支持，驱动程序及其它资源丰富
2. 占位
3. 占位
4. 占位
5. 占位
6. 占位

### 1.3.4 其他嵌入式操作系统

1. 安卓
2. iOS
3. μCOS
    1. 实时嵌入式操作系统
    2. 代表版本是μC/OS-Ⅱ
    3. 可固化
    4. 可裁剪
    5. 抢先式
    6. 实时多任务
    7. 可确定性
    8. 仅是一个实时内核，有很多工作需要用户自己完成
4. WindowsCE
5. VxWorks

## 1.4 嵌入式系统开发模式

### 1.4.1 计算机系统开发模式之单片机

1. 传统单片机系统的开发：主机+仿真机+仿真头+自制硬件

### 1.4.2 计算机系统开发模式之台式计算机

略

### 1.4.3 嵌入式系统开发模式

#### 开发模式

1. 嵌入式系统开发的“主机+仿真器+硬件平台”的模式
2. 嵌入式系统开发的“主机+硬件平台”的模式

#### 完整的嵌入式操作系统

1. 初始化时，一般需要通过仿真器向硬件平台下载嵌入式操作系统的启动加载程序Bootloader
2. 在通过Bootloader安装了嵌入式操作系统之后，就不再需要仿真器了
3. 只需要利用网络通信(有时也可以利用USB或串口)，下载或通过网络文件系统在目标机上运行程序
4. 注：一些新的嵌入式硬件平台不再提供仿真器，而是使用SD卡或USB接口

#### 与应用程序一体化的操作系统

1. 开发时使用的是仿真器提供的开发环境
2. 这时在整个开发过程中仿真器不可或缺
3. 这种方式除了自制硬件平台被通用硬件平台代替外，与单片机系统开发类似

**9月16日**

***

### 1.4.4 嵌入式系统开发模式之个人移动设备

个人移动设备：PMD（Personal Mobile Device）





















